{% extends 'base.html' %}
{% load custom_tag %}
{% load static %}



{% block contant %}

    {% if not cart_len %}
        <img class="center" src="{% static 'img/product_not_found.webp' %}">
        <center><h3>Your CheckOut is Empty ! !</h3></center>
    {% else %}





        <div class="container-fluid">
            <div class="row px-xl-5">
                <div class="col-lg-8">

                    <h5 class="section-title position-relative text-uppercase mb-3"><span class="bg-secondary pr-3">Billing Address</span>
                    </h5>

                    {% if request.user.shipping_address.all %}
                        <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example">
                            {% for address in request.user.shipping_address.all %}

                                <option name="address" value="{{ address.address }}">{{ address.address }}</option>
                            {% endfor %}

                        </select>


                        <div class="col-md-12">
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="shipto">
                                <label class="custom-control-label" for="shipto" data-toggle="collapse"
                                       data-target="#shipping-address">Ship to different address</label>
                            </div>
                        </div>
                        <br>
                        <div class="collapse mb-5" id="shipping-address">
                            <h5 class="section-title position-relative text-uppercase mb-3"><span
                                    class="bg-secondary pr-3">Shipping Address</span></h5>
                            <div class="bg-light p-30">
                                <div class="row">
                                    <div class="col-md-6 form-group">
                                        <label>First Name</label>
                                        {{ form.first_name }}
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label>Last Name</label>
                                        {{ form.last_name }}
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label>E-mail</label>
                                        {{ form.email }}
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label>Mobile Number</label>
                                        {{ form.phone_number }}
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label>city</label>
                                        {{ form.city }}
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label>State</label>
                                        {{ form.state }}
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label>Address</label>
                                        {{ form.address }}
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label>ZIP Code</label>
                                        {{ form.zip_code }}
                                    </div>
                                </div>
                            </div>
                        </div>

                    {% else %}
                        <div class="bg-light p-30 mb-5">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    <label>First Name</label>
                                    {{ form.first_name }}
                                </div>
                                <div class="col-md-6 form-group">
                                    <label>Last Name</label>
                                    {{ form.last_name }}
                                </div>
                                <div class="col-md-6 form-group">
                                    <label>E-mail</label>
                                    {{ form.email }}
                                </div>
                                <div class="col-md-6 form-group">
                                    <label>Mobile Number</label>
                                    {{ form.phone_number }}
                                </div>
                                <div class="col-md-6 form-group">
                                    <label>city</label>
                                    {{ form.city }}
                                </div>
                                <div class="col-md-6 form-group">
                                    <label>State</label>
                                    {{ form.state }}
                                </div>
                                <div class="col-md-6 form-group">
                                    <label>Address</label>
                                    {{ form.address }}
                                </div>
                                <div class="col-md-6 form-group">
                                    <label>ZIP Code</label>
                                    {{ form.zip_code }}
                                </div>
                            </div>
                        </div>
                    {% endif %}
                </div>

                {#                    {% else %}#}
                {##}
                {#                        <div class="bg-light p-30 mb-5">#}
                {#                            <div class="row">#}
                {#                                <div class="col-md-6 form-group">#}
                {#                                    <label>First Name</label>#}
                {#                                    {{ form.first_name }}#}
                {#                                </div>#}
                {#                                <div class="col-md-6 form-group">#}
                {#                                    <label>Last Name</label>#}
                {#                                    {{ form.last_name }}#}
                {#                                </div>#}
                {#                                <div class="col-md-6 form-group">#}
                {#                                    <label>E-mail</label>#}
                {#                                    {{ form.email }}#}
                {#                                </div>#}
                {#                                <div class="col-md-6 form-group">#}
                {#                                    <label>Mobile Number</label>#}
                {#                                    {{ form.phone_number }}#}
                {#                                </div>#}
                {#                                <div class="col-md-6 form-group">#}
                {#                                    <label>city</label>#}
                {#                                    {{ form.city }}#}
                {#                                </div>#}
                {#                                <div class="col-md-6 form-group">#}
                {#                                    <label>State</label>#}
                {#                                    {{ form.state }}#}
                {#                                </div>#}
                {#                                <div class="col-md-6 form-group">#}
                {#                                    <label>Address</label>#}
                {#                                    {{ form.address }}#}
                {#                                </div>#}
                {#                                <div class="col-md-6 form-group">#}
                {#                                    <label>ZIP Code</label>#}
                {#                                    {{ form.zip_code }}#}
                {#                                </div>#}
                {#                            </div>#}
                {#                        </div>#}
                {#                    {% endif %}#}


                <div class="col-lg-4">
                    <h5 class="section-title position-relative text-uppercase mb-3"><span
                            class="bg-secondary pr-3">Order Total</span>
                    </h5>
                    <div class="bg-light p-30 mb-5">
                        <div class="border-bottom">
                            <h6 class="mb-3">Products</h6>
                            {% for item in cart %}
                                <div class="d-flex justify-content-between">
                                    <p>{{ item.product.title }}</p>
                                    <p>${{ item.total }}</p>
                                </div>
                            {% endfor %}
                        </div>
                        <div class="border-bottom pt-3 pb-2">
                            <div class="d-flex justify-content-between mb-3">
                                <h6>Subtotal</h6>
                                <h6>$1{{ cart.total }}</h6>
                            </div>
                            <div class="d-flex justify-content-between">
                                <h6 class="font-weight-medium">Shipping</h6>
                                <h6 class="font-weight-medium">$10</h6>
                            </div>
                        </div>
                        <div class="pt-2">
                            <div class="d-flex justify-content-between mt-2">
                                <h5>Total</h5>
                                <h5>${{ cart.total|shipping_price }}</h5>
                            </div>
                        </div>
                    </div>

                    <div class="mb-5">
                        <h5 class="section-title position-relative text-uppercase mb-3"><span
                                class="bg-secondary pr-3">Payment</span>
                        </h5>
                        <div class="bg-light p-30">
                            <div class="form-group">
                                <div class="custom-control custom-radio">
                                    <input value="online" checked type="radio" class="custom-control-input" name="payment"
                                           id="paypal">
                                    <label class="custom-control-label" for="paypal">Online</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-control custom-radio">
                                    <input value="cash" type="radio" class="custom-control-input" name="payment"
                                           id="directcheck">
                                    <label class="custom-control-label" for="directcheck">Attendant
                                        Payment</label>
                                </div>
                            </div>
                            {% if request.user.is_authenticated %}
                                <a href="{% url 'cart:place_order' %}">
                                    <button class="btn btn-block btn-primary font-weight-bold py-3">Place Order</button>
                                </a>
                                </div>
                            {% else %}
                                <a href="{% url 'Account:login' %}?next={{ request.get.full_path }}">
                                    <button class="btn btn-block btn-primary font-weight-bold py-3">Login</button>
                                </a>

                            {% endif %}
                    </div>
                </div>
                <div class="col-lg-8 table-responsive mb-5">
                    <table class="table table-light table-borderless table-hover text-center mb-0">
                        <thead class="thead-dark">
                        <tr>
                            <th>Products</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Total</th>
                            <th>Remove</th>
                        </tr>
                        </thead>
                        <tbody class="align-middle">
                        {% for item in cart %}


                            <td class="align-middle"><a
                                    href="{% url 'product:Product_detail' item.product.id %}?in_cart_color={{ item.color }}&in_cart_size={{ item.size }}"><img
                                    src="{{ item.product.product_image }}" alt=""
                                    style="width: 50px; max-height: 60px"></a> {{ item.title }}
                            </td>

                            <td class="align-middle">${{ item.product.product_price }}</td>
                            <td class="align-middle">
                                <div class="input-group quantity mx-auto" style="width: 100px;">
                                    <div class="input-group-btn">

                                    </div>
                                    <input readonly type="text"
                                           class="form-control form-control-sm bg-secondary border-0 text-center"
                                           value="{{ item.quantity }}">
                                    <div class="input-group-btn">

                                    </div>
                                </div>
                            </td>
                            <td class="align-middle">${{ item.total }}</td>
                            <td class="align-middle">
                                <a href="{% url 'cart:Delete_cart' item.uid %}">
                                    <button class="btn btn-sm btn-danger"><i class="fa fa-times"></i></button>
                                </a>
                            </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- Checkout End -->
    {% endif %}
{% endblock %}